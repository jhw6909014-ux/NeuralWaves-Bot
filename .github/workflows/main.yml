name: NeuralWaves Auto Generator

on:
  schedule:
    - cron: '0 */6 * * *' # æ¯6å°æ™‚åŸ·è¡Œ
  workflow_dispatch:      # æ‰‹å‹•è§¸ç™¼æŒ‰éˆ•

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ ä¸‹è¼‰ç¨‹å¼ç¢¼ (Checkout)
      uses: actions/checkout@v3

    - name: ğŸ› ï¸ å®‰è£ç³»çµ±å·¥å…· (FFmpeg)
      run: |
        sudo apt-get update
        sudo apt-get install -y ffmpeg

    - name: ğŸ è¨­å®š Python ç’°å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: ğŸ“¦ å¼·åˆ¶å®‰è£ Python å¥—ä»¶ (ç•¥é requirements.txt)
      run: |
        python -m pip install --upgrade pip
        # é€™è£¡ç›´æ¥æŒ‡å®šå¥—ä»¶åç¨±ï¼Œè§£æ±ºè®€ä¸åˆ°æª”æ¡ˆçš„å•é¡Œï¼Œä¹Ÿä¸æ€•æª”åæ‰“éŒ¯
        pip install google-generativeai edge-tts feedparser gTTS certifi ffmpeg-python requests

    - name: ğŸ” è‡ªæˆ‘æª¢æŸ¥ (Debug)
      run: |
        echo "æ­£åœ¨æª¢æŸ¥ç›®éŒ„ä¸‹çš„æª”æ¡ˆ..."
        ls -la
        # é€™è¡Œæœƒåˆ—å‡ºæ‰€æœ‰æª”æ¡ˆï¼Œç¢ºä¿ä½ çš„ neural_ultimate.py å’Œç´ æçœŸçš„å­˜åœ¨

    - name: ğŸ¤– åŸ·è¡Œ AI ç”Ÿæˆè…³æœ¬
      env:
        GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
      run: python neural_ultimate.py

    - name: ğŸ“¤ ä¸Šå‚³ç”Ÿæˆçš„å½±ç‰‡
      if: success() 
      uses: actions/upload-artifact@v4
      with:
        name: neural-video
        path: Ultimate_*.mp4
        retention-days: 5
