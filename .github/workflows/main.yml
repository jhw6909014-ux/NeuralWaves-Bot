name: NeuralWaves Auto Generator

on:
  schedule:
    - cron: '0 */6 * * *' # æ¯6å°æ™‚ä¸€æ¬¡
  workflow_dispatch:      # æ‰‹å‹•æŒ‰éˆ•

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ ä¸‹è¼‰ç¨‹å¼ç¢¼
      uses: actions/checkout@v3

    - name: ğŸ› ï¸ å®‰è£ç³»çµ±å·¥å…·
      run: |
        sudo apt-get update
        sudo apt-get install -y ffmpeg

    - name: ğŸ è¨­å®š Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: ğŸ“¦ å®‰è£å¥—ä»¶ (å«ä¸Šå‚³å·¥å…·)
      run: |
        python -m pip install --upgrade pip
        # é€™è£¡åŠ å…¥äº† google-api-python-client å’Œ google-auth-oauthlib
        pip install google-generativeai edge-tts feedparser gTTS certifi ffmpeg-python requests google-api-python-client google-auth-oauthlib

    - name: ğŸ¤– åŸ·è¡Œ AI è…³æœ¬ (æ³¨å…¥é‡‘é‘°)
      env:
        # é€™è£¡æŠŠ GitHub Secrets å‚³çµ¦ Python
        GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        YT_CLIENT_ID: ${{ secrets.YT_CLIENT_ID }}
        YT_CLIENT_SECRET: ${{ secrets.YT_CLIENT_SECRET }}
        YT_REFRESH_TOKEN: ${{ secrets.YT_REFRESH_TOKEN }}
      run: python neural_ultimate.py

    - name: ğŸ“¤ å‚™ä»½å½±ç‰‡ (Artifact)
      if: success() 
      uses: actions/upload-artifact@v4
      with:
        name: neural-video
        path: final_output.mp4
        retention-days: 5
